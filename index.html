<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>RUET - Civil Engineering 23 [section A]</title>

	<link rel="icon" type="image/x-icon" href="./favicon/favicon.ico">
	<link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">

	<link rel="stylesheet" href="style.css">
	<link rel="preload" href="./assets/bg/main_gate.jpg" as="image" type="image/jpg" />
	<link rel="preload" href="./assets/bg/dept_building.png" as="image" type="image/png" />
	<link rel="preload" href="./assets/bg/group_photo.png" as="image" type="image/png" />
	<script src="https://kit.fontawesome.com/5bbd17dd94.js" crossorigin="anonymous"></script>
	<script src="main.js"></script>

</head>

<body>
	<!-- dark mode toggle -->
	<div class="toggler">
		<label id="switch" class="switch">
			<input id="toggle" type="checkbox" checked>
			<span class="slider round"></span>
		</label>
	</div>
	<!-- Background animation-->
	<div class="area">
		<ul class="squares" id="squares">
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</div>

	<!-- Header -->
	<div class="header-container">
		<div class="logo">
			<img src="logo.png">
		</div>
		<div class="department-name">
			Civil Engineering - 23 <br />
			section: A
		</div>
	</div>


	<!-- Welcome -->
	<div class="welcome-container">
		<div class="welcome-bg">
			<h1> Welcome </h1>
			<h3>To the department of </h3>
			<h2>CIVIL ENGINEERING </h2>
			<h1>RUET</h1>
			<h3>23 series [section-A]</h3>
		</div>
	</div>

	<!-- start -->
	<div class="start-text" id="start-text">
		<div class="text">
			Let's know about the students of this section!
		</div>
	</div>

	<!-- CR List -->
	<div class="heading" id="heading">The Class Representetive</div>

	<div class="cr-list-container">

		<div class="flip-container">
			<div class="flip-inner-container">
				<div class="flip-front">
					<img src="./assets/profile/p1.png">
					<h3>Md Ridwanul Islam Himel</h3>
					<h3>2300027</h3>
				</div>
				<div class="flip-back">
					<img src="./assets/profile/p1.png">
					<div class="details">
						<span><i class="fa fa-home"></i> Hometown</span>
						<span><i class="fa fa-school"></i> High School name, address</span>
						<span><i class="fa fa-building-columns"></i> College name, address</span>
					</div>
					<div class="social-icons">
						<a href="#"><i class="fa fa-facebook"></i></a>
						<a href="#"><i class="fa fa-instagram"></i></a>
						<a href="#"><i class="fa fa-whatsapp"></i></a>
					</div>
				</div>
			</div>
		</div>



		<div class="flip-container">
			<div class="flip-inner-container">
				<div class="flip-front">
					<img src="./assets/profile/p3.png">
					<h3>Md Moshiur Hasan</h3>
					<h3>2300039</h3>
				</div>
				<div class="flip-back">
					<img src="./assets/profile/p3.png">
					<div class="details">
						<span><i class="fa fa-home"></i> Hometown</span>
						<span><i class="fa fa-school"></i> High School name, address</span>
						<span><i class="fa fa-building-columns"></i> College name, address</span>
					</div>
					<div class="social-icons">
						<a href="#"><i class="fa fa-facebook"></i></a>
						<a href="#"><i class="fa fa-instagram"></i></a>
						<a href="#"><i class="fa fa-whatsapp"></i></a>
					</div>
				</div>
			</div>
		</div>


	</div>


	<!-- List -->
	<div class="heading">The Family</div>
	<input type="text" id="search" placeholder="Search by name, roll, school, etc..." />
	<div id="list-container" class="list-container">
	</div>

	<script>
		const scriptURL = "https://script.google.com/macros/s/AKfycbztdLBLZuf-rCCKecf031FoEiWXAsY8Iv379dJfhkk_W9r1XK57HWLLKw5AFTxArWv97w/exec?mode=all";

		let allStudents = [];

		async function fetchStudents() {
			const res = await fetch(scriptURL);
			const data = await res.json();
			allStudents = data.sort((a, b) => {
				const rollA = parseInt(a.Roll);
				const rollB = parseInt(b.Roll);
				return rollA - rollB;
			});
			renderCards(allStudents);
		}

		function renderCards(list) {
			const container = document.getElementById("list-container");
			container.innerHTML = "";

			list.forEach(student => {
				const card = document.createElement("div");
				card.className = "flip-container";

				card.innerHTML = `
					<div class="flip-inner-container">
						<div class="flip-front">
							<img src="${student.PhotoURL || 'https://via.placeholder.com/150'}" alt="photo" >
							<h3>${student.Name}</h3>
							<h3>${student.Roll}</h3>
						</div>
						<div class="flip-back">
							<img src="${student.PhotoURL || 'https://via.placeholder.com/150'}" alt="photo" >
							<div class="details">
								<span><i class="fa fa-home"></i> ${student.Hometown}</span>
								<span><i class="fa fa-school"></i> ${student.School}</span>
								<span><i class="fa fa-building-columns"></i> ${student.College}</span>
							</div>
							<div class="social-icons">
								<a href="${student.Facebook}" target="_blank"><i class="fa fa-facebook"></i></a>
								<a href="${student.Instagram}" target="_blank"><i class="fa fa-instagram"></i></a>
								<a href="https://wa.me/880${student.WhatsApp}" target="_blank"><i class="fa fa-whatsapp"></i></a>
							</div>
						</div>
					</div>
        		`;

				container.appendChild(card);
			});
		}

		document.getElementById("search").addEventListener("input", e => {
			const query = e.target.value.toLowerCase();

			const filtered = allStudents.filter(s => {
				return (
					(s.Name && s.Name.toLowerCase().includes(query)) ||
					(s.Roll.includes(query)) ||
					(s.School && s.School.toLowerCase().includes(query)) ||
					(s.College && s.College.toLowerCase().includes(query)) ||
					(s.Hometown && s.Hometown.toLowerCase().includes(query))
				);
			});

			console.log(filtered);
			renderCards(filtered);
			
		});

		fetchStudents();
	</script>

	<!-- Footer -->
	<div class="footer">
		Copywrite Â© <span id="date">2024</span> Students of RUET Civil-23 Section-A
	</div>

</body>

</html>
